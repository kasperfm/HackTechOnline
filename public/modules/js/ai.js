var displayArea,dialogue,dialogueIterator,runner=new bondage.Runner,optNum=0;function loadAI(e){if(!(displayArea=document.getElementById("ai_speak")))return!1;fetch("vfs/dialog/ai/"+e+".json").then(e=>e.json()).then(e=>initDialog(e))}function initDialog(e){displayArea.innerHTML="",dialogue=new bondage.Runner,null!=e&&(dialogue.load(e),dialogueIterator=dialogue.run("Start"),stepDialog())}function stepDialog(){for($("#ai_responses").empty();;){var e=dialogueIterator.next();if(e.done)break;var n=e.value;if(n instanceof bondage.OptionsResult){showOptions(n);break}$("#ai_speak").text(n.text)}}function showOptions(e){displayArea.innerHTML+="<br/>";for(var n=0;n<e.options.length;n++)$("#ai_responses").append('<li rel="'+n+'" class="ai_respond ai_response-'+optNum+'">&gt; '+e.options[n]+"</li>");$(".ai_response-"+optNum).on("click",function(){var n=$(this).attr("rel");e.select(n),optNum++,stepDialog()})}$(document).ready(function(){loadAI("demo")});
